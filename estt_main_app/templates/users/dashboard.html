{% extends "base.html" %}

{% load static %}
{% block head %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px; /* Increased padding for better spacing */
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
    </style> 
    <title>ESTT Dashboard - {{ user.username}}</title>   
{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-head">
        <h1>This is {{ user.username }}'s Dashboard</h1>
    </div>
    
    <div class="dashboard-container">
        <div class="dashboard-teams-container mb-4">
            <div class="teams-head d-flex justify-content-between align-items-center">
                <h3>My Teams</h3>
                <a class="btn btn-primary" href="{% url 'new-team' %}">New Team</a>
            </div>            
            <div class="table-responsive"> <!-- Added responsive wrapper -->
                <table class="table table-bordered mt-2">
                    <thead>
                        <tr>
                            <th>Team</th>
                            <th>Team Coach</th>
                            <th>Team Link</th>                
                        </tr>
                    </thead>
                    <tbody>
                        {% for team in teams %}
                            <tr>
                                <td>{{ team.team.name }}</td>
                                <td>
                                    {% if team.isCoach %}
                                        Yes
                                    {% else %}
                                        No
                                    {% endif %}
                                </td>
                                <td><a href="{% url 'team-details' teamID=team.team.id %}">Details</a></td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="dashboard-times-container">
            <div class="times-head d-flex justify-content-between align-items-center">
                <h3>My Times</h3>
                <a class="btn btn-primary" href="{% url 'add-time' %}">New Time</a>
            </div>
            
            <div class="table-responsive"> <!-- Added responsive wrapper -->
                <table class="table table-bordered mt-2">
                    <thead>
                        <tr>
                            <th>Level</th>
                            <th>Time</th>
                            <th>Update Link</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for time in times %}
                        <tr>
                            <td>{{ time.level }}</td>
                            <td>{{ time.time }}</td> 
                            <td><a href="{% url 'update-time' time_id=time.id %}">Update</a></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}
